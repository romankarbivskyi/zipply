generator client {
  provider = "prisma-client"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Link {
  id          String   @id @default(cuid())
  originalUrl String
  shortCode   String   @unique
  userId      String
  createdAt   DateTime @default(now())

  clicks Int @default(0)

  clickEvents Click[]

  @@index([shortCode])
}

model Click {
  id     String @id @default(cuid())
  linkId String
  link   Link   @relation(fields: [linkId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())

  country String?
  city    String?

  device  String?
  browser String?
  os      String?

  referrer String?

  @@index([linkId])
  @@index([linkId, createdAt])
}
